%% Ping/Scroll Loop - Mermaid prototype
%% Place this file in Figma or export to SVG with mermaid-cli (mmdc)

flowchart LR
  %% Nodes around the loop
  A["<font size='5'>Notification | Ping</font>"] --> B["<font size='5'>Check Phone</font>"]
  B --> C["<font size='5'>Scroll | Feed Interaction</font>"]
  C --> D["<font size='5'>Anticipation & Craving<br>(Dopamine Spike)</font>"]
  D --> E["<font size='5'>Brief Relief / Reward</font>"]
  E --> F["<font size='5'>Baseline Drops / Frustration</font>"]
  F --> A

  %% Intervention off-ramps (outside the main loop)
  subgraph interventions
    direction TB
  X1(("<font size='5'>Exit: Pause / Breathwork</font>"))
  X2(("<font size='5'>Exit: Put Phone Away</font>"))
  X3(("<font size='5'>Exit: Redirect Task</font>"))
  end

  %% Dashed connections from loop to interventions
  B -.-> X1
  C -.-> X2
  F -.-> X3

  %% Styling: use project tokens (hex values from variables.css)
  %% nodeBase: neutral nodes; nodeAccent: dopamine node; offRamp: intervention pills; arrow styling via linkStyle
  classDef nodeBase fill:#ffffff,stroke:#e2e8f0,stroke-width:1px,color:#0f172a,font-size:14px
  classDef nodeAccent fill:#c9a961,stroke:#c9a961,stroke-width:1px,color:#ffffff,font-size:15px
  %% off-ramp styling: light transparent blue fill, clear stroke and darker text for legibility
  classDef offRamp fill:#e6f5ff,stroke:#60a5fa,stroke-dasharray:4 4,color:#0f172a,font-size:14px

  %% assign classes to nodes
  class A,B,C,E,F nodeBase
  class D nodeAccent
  class X1,X2,X3 offRamp

  %% style the interventions subgraph background (subtle blue panel)
  style interventions fill:#f0fbff,stroke:#60a5fa,stroke-width:1px

  %% Link styles: main loop links 0..5, off-ramps 6..8
  linkStyle 0 stroke:#475569,stroke-width:2px
  linkStyle 1 stroke:#475569,stroke-width:2px
  linkStyle 2 stroke:#475569,stroke-width:2px
  linkStyle 3 stroke:#475569,stroke-width:2px
  linkStyle 4 stroke:#475569,stroke-width:2px
  linkStyle 5 stroke:#475569,stroke-width:2px

  linkStyle 6 stroke:#64748b,stroke-width:2px,stroke-dasharray:4 4
  linkStyle 7 stroke:#64748b,stroke-width:2px,stroke-dasharray:4 4
  linkStyle 8 stroke:#64748b,stroke-width:2px,stroke-dasharray:4 4

  %% Notes:
  %% - When exporting to SVG and importing into Figma, convert styled text to editable text and restyle fills with your CSS variables.
  %% - The numbered linkStyle refers to the 0-based index of links; adjust after export if needed.
