%% Ping/Scroll Loop - Mermaid prototype
%% Place this file in Figma or export to SVG with mermaid-cli (mmdc)

flowchart LR
  %% Nodes around the loop
  A["Notification / Ping"] --> B["Check / Quick Scan"]
  B --> C["Scroll / Feed Interaction"]
  C --> D["Anticipation & Craving<br>(Dopamine Spike)"]
  D --> E["Brief Relief / Reward"]
  E --> F["Baseline Drops / Frustration"]
  F --> A

  %% Intervention off-ramps (outside the main loop)
  subgraph interventions
    direction TB
    X1(("Exit: Pause / Breathwork"))
    X2(("Exit: Put Phone Away"))
    X3(("Exit: Redirect Task"))
  end

  %% Dashed connections from loop to interventions
  B -.-> X1
  C -.-> X2
  F -.-> X3

  %% Styling: use project tokens (hex values from variables.css)
  %% nodeBase: neutral nodes; nodeAccent: dopamine node; offRamp: intervention pills; arrow styling via linkStyle
  classDef nodeBase fill:#ffffff,stroke:#e2e8f0,stroke-width:1px,color:#0f172a,font-size:14px
  classDef nodeAccent fill:#c9a961,stroke:#c9a961,stroke-width:1px,color:#ffffff,font-size:15px
  classDef offRamp fill:transparent,stroke:#64748b,stroke-dasharray:4 4,color:#475569,font-size:13px

  %% assign classes to nodes
  class A,B,C,E,F nodeBase
  class D nodeAccent
  class X1,X2,X3 offRamp

  %% Link styles: main loop links 0..5, off-ramps 6..8
  linkStyle 0 stroke:#475569,stroke-width:2px
  linkStyle 1 stroke:#475569,stroke-width:2px
  linkStyle 2 stroke:#475569,stroke-width:2px
  linkStyle 3 stroke:#475569,stroke-width:2px
  linkStyle 4 stroke:#475569,stroke-width:2px
  linkStyle 5 stroke:#475569,stroke-width:2px

  linkStyle 6 stroke:#64748b,stroke-width:2px,stroke-dasharray:4 4
  linkStyle 7 stroke:#64748b,stroke-width:2px,stroke-dasharray:4 4
  linkStyle 8 stroke:#64748b,stroke-width:2px,stroke-dasharray:4 4

  %% Notes:
  %% - When exporting to SVG and importing into Figma, convert styled text to editable text and restyle fills with your CSS variables.
  %% - The numbered linkStyle refers to the 0-based index of links; adjust after export if needed.
