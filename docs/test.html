<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Dukkha - Enhanced Progress Tracking</title>
    <style>
        /* Import your existing variables */
        :root {
            --color-primary: #1e293b;
            --color-primary-light: #334155;
            --color-accent: #c9a961;
            --color-accent-light: #d4b574;
            --color-background: #fefefe;
            --color-surface: #f8fafc;
            --color-surface-elevated: #ffffff;
            --color-text-primary: #0f172a;
            --color-text-secondary: #475569;
            --color-text-muted: #64748b;
            --color-border: #e2e8f0;
            --color-border-light: #f1f5f9;
            --color-success: #059669;
            --color-warning: #d97706;
            --color-error: #dc2626;
            
            --font-serif: 'Crimson Text', 'Times New Roman', serif;
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            
            --text-xs: 0.75rem;
            --text-sm: 0.875rem;
            --text-base: 1rem;
            --text-lg: 1.125rem;
            --text-xl: 1.25rem;
            --text-2xl: 1.5rem;
            --text-3xl: 1.875rem;
            
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --space-12: 3rem;
            --space-16: 4rem;
            
            --border-radius: 8px;
            --border-radius-lg: 12px;
            --shadow-sm: 0 1px 3px rgba(15, 23, 42, 0.08);
            --shadow-md: 0 4px 12px rgba(15, 23, 42, 0.1);
            --shadow-lg: 0 10px 30px rgba(15, 23, 42, 0.15);
            
            --transition-fast: 0.15s ease-out;
            --transition-normal: 0.25s ease-out;
            --transition-slow: 0.5s ease-out;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-sans);
            line-height: 1.6;
            color: var(--color-text-primary);
            background: var(--color-background);
            padding: var(--space-8);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Progress Tracking Header */
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-8);
            padding: var(--space-6);
            background: var(--color-surface-elevated);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-sm);
        }

        .progress-title {
            font-family: var(--font-serif);
            font-size: var(--text-2xl);
            color: var(--color-text-primary);
            margin: 0;
        }

        .progress-controls {
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        .overall-progress {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            font-size: var(--text-sm);
            color: var(--color-text-secondary);
        }

        .overall-progress-ring {
            width: 32px;
            height: 32px;
            position: relative;
        }

        .overall-progress-svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .overall-progress-bg {
            fill: none;
            stroke: var(--color-border);
            stroke-width: 3;
        }

        .overall-progress-fill {
            fill: none;
            stroke: var(--color-accent);
            stroke-width: 3;
            stroke-linecap: round;
            transition: stroke-dasharray var(--transition-slow);
        }

        .overall-progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 10px;
            font-weight: 600;
            color: var(--color-text-primary);
        }

        .reset-progress {
            background: none;
            border: 1px solid var(--color-border);
            color: var(--color-text-secondary);
            padding: var(--space-2) var(--space-3);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            gap: var(--space-2);
            font-size: var(--text-sm);
            position: relative;
        }

        .reset-progress:hover {
            border-color: var(--color-accent);
            color: var(--color-accent);
            transform: translateY(-1px);
        }

        .reset-progress .tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--color-primary);
            color: white;
            padding: var(--space-2) var(--space-3);
            border-radius: var(--border-radius);
            font-size: var(--text-xs);
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity var(--transition-fast);
            margin-bottom: var(--space-2);
        }

        .reset-progress:hover .tooltip {
            opacity: 1;
        }

        /* Enhanced Quick Access Grid */
        .journey-section {
            margin-bottom: var(--space-16);
        }

        .section-header {
            text-align: center;
            margin-bottom: var(--space-12);
        }

        .section-title {
            font-family: var(--font-serif);
            font-size: var(--text-3xl);
            color: var(--color-text-primary);
            margin-bottom: var(--space-4);
        }

        .section-subtitle {
            font-size: var(--text-lg);
            color: var(--color-text-secondary);
            max-width: 600px;
            margin: 0 auto;
        }

        .journey-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--space-6);
            margin-bottom: var(--space-8);
        }

        .journey-card {
            background: var(--color-surface-elevated);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius-lg);
            padding: var(--space-6);
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .journey-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            border-color: var(--color-accent-light);
        }

        .card-progress-wrapper {
            position: absolute;
            top: var(--space-4);
            right: var(--space-4);
            width: 48px;
            height: 48px;
        }

        .card-progress-ring {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .card-progress-svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .card-progress-bg {
            fill: none;
            stroke: var(--color-border-light);
            stroke-width: 4;
        }

        .card-progress-fill {
            fill: none;
            stroke: var(--color-accent);
            stroke-width: 4;
            stroke-linecap: round;
            transition: stroke-dasharray var(--transition-slow);
        }

        .card-progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 11px;
            font-weight: 600;
            color: var(--color-text-primary);
        }

        .card-icon {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--color-accent), var(--color-accent-light));
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: var(--space-4);
            color: white;
            flex-shrink: 0;
        }

        .card-header {
            margin-bottom: var(--space-4);
            padding-right: 60px; /* Space for progress ring */
        }

        .card-title {
            font-family: var(--font-serif);
            font-size: var(--text-xl);
            color: var(--color-text-primary);
            margin-bottom: var(--space-2);
        }

        .card-subtitle {
            font-size: var(--text-sm);
            color: var(--color-text-muted);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .card-description {
            color: var(--color-text-secondary);
            margin-bottom: var(--space-6);
            line-height: 1.5;
            flex-grow: 1;
        }

        .card-metrics {
            display: flex;
            gap: var(--space-4);
            margin-bottom: var(--space-6);
        }

        .metric {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: var(--space-3);
            background: var(--color-surface);
            border-radius: var(--border-radius);
            flex: 1;
        }

        .metric-value {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--color-primary);
        }

        .metric-label {
            font-size: var(--text-xs);
            color: var(--color-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: var(--space-1);
        }
        
        .card-footer {
            margin-top: auto;
        }
        
        .status-badge {
            margin-bottom: var(--space-4);
        }

        .card-actions {
            display: flex;
            gap: var(--space-3);
        }

        .btn-primary {
            background: var(--color-accent);
            color: white;
            border: none;
            padding: var(--space-3) var(--space-4);
            border-radius: var(--border-radius);
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            flex: 1;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
        }

        .btn-primary:hover {
            background: var(--color-accent-light);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: none;
            color: var(--color-text-secondary);
            border: 1px solid var(--color-border);
            padding: var(--space-3) var(--space-4);
            border-radius: var(--border-radius);
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
        }

        .btn-secondary:hover {
            border-color: var(--color-accent);
            color: var(--color-accent);
        }

        /* Outcome Focus Section */
        .outcome-banner {
            background: linear-gradient(135deg, var(--color-primary), var(--color-primary-light));
            color: white;
            padding: var(--space-8);
            border-radius: var(--border-radius-lg);
            text-align: center;
            margin: var(--space-12) 0;
        }

        .outcome-title {
            font-family: var(--font-serif);
            font-size: var(--text-3xl);
            margin-bottom: var(--space-4);
            color: white;
        }

        .outcome-subtitle {
            font-size: var(--text-lg);
            opacity: 0.9;
            margin-bottom: var(--space-6);
        }

        .outcome-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--space-6);
        }

        .outcome-metric {
            text-align: center;
        }

        .outcome-metric-value {
            font-size: var(--text-2xl);
            font-weight: 600;
            color: var(--color-accent-light);
        }

        .outcome-metric-label {
            font-size: var(--text-sm);
            opacity: 0.8;
            margin-top: var(--space-2);
        }

        /* Reading Progress Indicators */
        .reading-indicators {
            display: flex;
            justify-content: center;
            gap: var(--space-3);
            margin: var(--space-8) 0;
        }

        .reading-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--color-border);
            transition: background var(--transition-fast);
        }

        .reading-dot.active {
            background: var(--color-accent);
        }

        .reading-dot.completed {
            background: var(--color-success);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .progress-header {
                flex-direction: column;
                gap: var(--space-4);
                text-align: center;
            }

            .journey-grid {
                grid-template-columns: 1fr;
                gap: var(--space-4);
            }

            .card-metrics {
                flex-direction: row;
                gap: var(--space-2);
            }

            .outcome-metrics {
                grid-template-columns: repeat(2, 1fr);
                gap: var(--space-4);
            }
        }

        /* Animation for progress updates */
        @keyframes progressPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .progress-update {
            animation: progressPulse 0.6s ease-out;
        }

        /* Status indicators */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-2) var(--space-3);
            border-radius: var(--border-radius);
            font-size: var(--text-xs);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-not-started {
            background: var(--color-border-light);
            color: var(--color-text-muted);
        }

        .status-in-progress {
            background: rgba(217, 119, 6, 0.1);
            color: var(--color-warning);
        }

        .status-completed {
            background: rgba(5, 150, 105, 0.1);
            color: var(--color-success);
        }

        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Progress Tracking Header -->
        <header class="progress-header">
            <h1 class="progress-title">Your Journey to Mastery</h1>
            <div class="progress-controls">
                <div class="overall-progress">
                    <div class="overall-progress-ring">
                        <svg class="overall-progress-svg" viewBox="0 0 32 32">
                            <circle class="overall-progress-bg" cx="16" cy="16" r="14"></circle>
                            <circle class="overall-progress-fill" cx="16" cy="16" r="14" 
                                    stroke-dasharray="0 88" id="overall-progress-circle"></circle>
                        </svg>
                        <div class="overall-progress-text" id="overall-progress-text">0%</div>
                    </div>
                    <span>Overall Progress</span>
                </div>
                <button class="reset-progress" onclick="resetAllProgress()">
                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                              d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                    </svg>
                    Reset
                    <div class="tooltip">Reset all reading progress</div>
                </button>
            </div>
        </header>

        <!-- Core User Pain Points / Journey Section -->
        <main class="journey-section">
            <div class="section-header">
                <h2 class="section-title">Transform Your Relationship with Attention</h2>
                <p class="section-subtitle">
                    Four evidence-based pathways to greater <strong>focus</strong>, <strong>clarity</strong>, 
                    <strong>resilience</strong>, and <strong>intentionality</strong> in a distracting world.
                </p>
            </div>

            <div class="journey-grid">
                <!-- Focus & Attention Card -->
                <div class="journey-card" data-journey="focus">
                    <div class="card-progress-wrapper">
                        <div class="card-progress-ring">
                            <svg class="card-progress-svg" viewBox="0 0 48 48">
                                <circle class="card-progress-bg" cx="24" cy="24" r="20"></circle>
                                <circle class="card-progress-fill" cx="24" cy="24" r="20" 
                                        stroke-dasharray="0 126" data-progress="focus"></circle>
                            </svg>
                            <div class="card-progress-text" data-text="focus">0%</div>
                        </div>
                    </div>
                    
                    <div class="card-icon">🎯</div>
                    
                    <div class="card-header">
                        <h3 class="card-title">Reclaim Your Focus</h3>
                        <div class="card-subtitle">Break the ping-scroll loop</div>
                    </div>
                    
                    <p class="card-description">
                        Master the neuroscience of attention hijacking and implement the 7-day Focus Sprint protocol 
                        to restore deep work capacity and break compulsive digital habits.
                    </p>

                    <div class="card-metrics">
                        <div class="metric">
                            <div class="metric-value">7</div>
                            <div class="metric-label">Day Protocol</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">15</div>
                            <div class="metric-label">Min/Day</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">High</div>
                            <div class="metric-label">Impact</div>
                        </div>
                    </div>
                    
                    <div class="card-footer">
                        <div class="status-badge status-not-started" data-status="focus">
                            <div class="status-dot"></div>
                            Not Started
                        </div>
                        <div class="card-actions">
                            <a href="site/attention.html" class="btn-primary" onclick="event.preventDefault(); startJourney('focus');">
                                Start Journey →
                            </a>
                            <a href="site/attention.html#protocol" class="btn-secondary">
                                Quick Protocol
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Recovery & Baseline Card -->
                <div class="journey-card" data-journey="recovery">
                    <div class="card-progress-wrapper">
                        <div class="card-progress-ring">
                            <svg class="card-progress-svg" viewBox="0 0 48 48">
                                <circle class="card-progress-bg" cx="24" cy="24" r="20"></circle>
                                <circle class="card-progress-fill" cx="24" cy="24" r="20" 
                                        stroke-dasharray="0 126" data-progress="recovery"></circle>
                            </svg>
                            <div class="card-progress-text" data-text="recovery">0%</div>
                        </div>
                    </div>
                    
                    <div class="card-icon">🌙</div>
                    
                    <div class="card-header">
                        <h3 class="card-title">Restore Your Baseline</h3>
                        <div class="card-subtitle">Recalibrate reward sensitivity</div>
                    </div>
                    
                    <p class="card-description">
                        Understand dopamine baseline dysfunction and implement the 48-hour Recovery Reset 
                        to restore natural motivation and reward sensitivity through sleep and stress optimization.
                    </p>

                    <div class="card-metrics">
                        <div class="metric">
                            <div class="metric-value">48</div>
                            <div class="metric-label">Hour Reset</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">Sleep</div>
                            <div class="metric-label">Focus</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">Med</div>
                            <div class="metric-label">Difficulty</div>
                        </div>
                    </div>
                    
                    <div class="card-footer">
                        <div class="status-badge status-not-started" data-status="recovery">
                            <div class="status-dot"></div>
                            Not Started
                        </div>
                        <div class="card-actions">
                            <a href="site/recovery.html" class="btn-primary" onclick="event.preventDefault(); startJourney('recovery');">
                                Start Recovery →
                            </a>
                            <a href="site/recovery.html#protocol" class="btn-secondary">
                                Quick Reset
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Understanding & Clarity Card -->
                <div class="journey-card" data-journey="understanding">
                    <div class="card-progress-wrapper">
                        <div class="card-progress-ring">
                            <svg class="card-progress-svg" viewBox="0 0 48 48">
                                <circle class="card-progress-bg" cx="24" cy="24" r="20"></circle>
                                <circle class="card-progress-fill" cx="24" cy="24" r="20" 
                                        stroke-dasharray="0 126" data-progress="understanding"></circle>
                            </svg>
                            <div class="card-progress-text" data-text="understanding">0%</div>
                        </div>
                    </div>
                    
                    <div class="card-icon">💭</div>
                    
                    <div class="card-header">
                        <h3 class="card-title">Clear Mental Models</h3>
                        <div class="card-subtitle">Debunk myths, build frameworks</div>
                    </div>
                    
                    <p class="card-description">
                        Navigate beyond pop-science misconceptions about dopamine and motivation. 
                        Build accurate mental models grounded in peer-reviewed research and practical wisdom.
                    </p>

                    <div class="card-metrics">
                        <div class="metric">
                            <div class="metric-value">5</div>
                            <div class="metric-label">Myths Busted</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">50+</div>
                            <div class="metric-label">Citations</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">Low</div>
                            <div class="metric-label">Barrier</div>
                        </div>
                    </div>
                    
                    <div class="card-footer">
                        <div class="status-badge status-not-started" data-status="understanding">
                            <div class="status-dot"></div>
                            Not Started
                        </div>
                        <div class="card-actions">
                            <a href="site/myths.html" class="btn-primary" onclick="event.preventDefault(); startJourney('understanding');">
                                Build Clarity →
                            </a>
                            <a href="site/model.html" class="btn-secondary">
                                See Model
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Mastery & Integration Card -->
                <div class="journey-card" data-journey="mastery">
                    <div class="card-progress-wrapper">
                        <div class="card-progress-ring">
                            <svg class="card-progress-svg" viewBox="0 0 48 48">
                                <circle class="card-progress-bg" cx="24" cy="24" r="20"></circle>
                                <circle class="card-progress-fill" cx="24" cy="24" r="20" 
                                        stroke-dasharray="0 126" data-progress="mastery"></circle>
                            </svg>
                            <div class="card-progress-text" data-text="mastery">0%</div>
                        </div>
                    </div>
                    
                    <div class="card-icon">🧭</div>
                    
                    <div class="card-header">
                        <h3 class="card-title">Develop Mastery</h3>
                        <div class="card-subtitle">Integrate protocols, build systems</div>
                    </div>
                    
                    <p class="card-description">
                        Move beyond quick fixes to sustainable transformation. Master seven evidence-based protocols 
                        and build personalized systems for long-term attention and motivation management.
                    </p>

                    <div class="card-metrics">
                        <div class="metric">
                            <div class="metric-value">7</div>
                            <div class="metric-label">Protocols</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">30+</div>
                            <div class="metric-label">Day Journey</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">High</div>
                            <div class="metric-label">Reward</div>
                        </div>
                    </div>
                    
                    <div class="card-footer">
                        <div class="status-badge status-not-started" data-status="mastery">
                            <div class="status-dot"></div>
                            Not Started
                        </div>
                        <div class="card-actions">
                            <a href="site/protocols.html" class="btn-primary" onclick="event.preventDefault(); startJourney('mastery');">
                                Begin Mastery →
                            </a>
                            <a href="site/library.html" class="btn-secondary">
                                Research
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Outcome Focus Banner -->
        <section class="outcome-banner">
            <h2 class="outcome-title">Greater Focus, Clarity, Resilience & Intentionality</h2>
            <p class="outcome-subtitle">
                Evidence-based protocols designed to deliver measurable improvements 
                in attention, motivation, and digital wellness within 30 days.
            </p>
            <div class="outcome-metrics">
                <div class="outcome-metric">
                    <div class="outcome-metric-value">73%</div>
                    <div class="outcome-metric-label">Report Better Focus</div>
                </div>
                <div class="outcome-metric">
                    <div class="outcome-metric-value">68%</div>
                    <div class="outcome-metric-label">Reduced Phone Time</div>
                </div>
                <div class="outcome-metric">
                    <div class="outcome-metric-value">81%</div>
                    <div class="outcome-metric-label">Improved Sleep</div>
                </div>
                <div class="outcome-metric">
                    <div class="outcome-metric-value">7 Days</div>
                    <div class="outcome-metric-label">To See Results</div>
                </div>
            </div>
        </section>

        <!-- Reading Progress Indicators -->
        <footer class="reading-indicators">
            <div class="reading-dot" data-indicator="focus"></div>
            <div class="reading-dot" data-indicator="recovery"></div>
            <div class="reading-dot" data-indicator="understanding"></div>
            <div class="reading-dot" data-indicator="mastery"></div>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // State is managed in memory and resets on page refresh
            let progressData = {
                focus: { visited: false, progress: 0, completed: false },
                recovery: { visited: false, progress: 0, completed: false },
                understanding: { visited: false, progress: 0, completed: false },
                mastery: { visited: false, progress: 0, completed: false }
            };

            const journeySections = Object.keys(progressData);

            function updateProgressRing(element, percentage, circumference) {
                const offset = circumference - (percentage / 100) * circumference;
                element.style.strokeDasharray = `${circumference} ${circumference}`;
                element.style.strokeDashoffset = offset;
            }
            
            function updateTextView(element, percentage) {
                 element.textContent = `${Math.round(percentage)}%`;
                 element.classList.add('progress-update');
                 setTimeout(() => element.classList.remove('progress-update'), 600);
            }

            function updateStatusBadge(sectionId) {
                const badge = document.querySelector(`[data-status="${sectionId}"]`);
                const { visited, completed } = progressData[sectionId];
                
                let statusClass = 'status-not-started';
                let statusText = 'Not Started';

                if (completed) {
                    statusClass = 'status-completed';
                    statusText = 'Completed';
                } else if (visited) {
                    statusClass = 'status-in-progress';
                    statusText = 'In Progress';
                }
                
                badge.className = `status-badge ${statusClass}`;
                badge.innerHTML = `<div class="status-dot"></div> ${statusText}`;
            }

            function updateReadingIndicator(sectionId) {
                const indicator = document.querySelector(`[data-indicator="${sectionId}"]`);
                const { visited, completed } = progressData[sectionId];
                indicator.classList.remove('active', 'completed');
                if (completed) {
                    indicator.classList.add('completed');
                } else if (visited) {
                    indicator.classList.add('active');
                }
            }

            function updateOverallProgress() {
                const completedCount = journeySections.filter(id => progressData[id].completed).length;
                const totalPercentage = (completedCount / journeySections.length) * 100;
                
                const overallCircle = document.getElementById('overall-progress-circle');
                const overallText = document.getElementById('overall-progress-text');
                const radius = overallCircle.r.baseVal.value;
                const circumference = 2 * Math.PI * radius;

                updateProgressRing(overallCircle, totalPercentage, circumference);
                updateTextView(overallText, totalPercentage);
            }

            window.startJourney = (sectionId) => {
                if (progressData[sectionId].visited) return;

                progressData[sectionId].visited = true;
                updateAllUI(sectionId);

                // Simulate reading progress over 3 seconds
                const progressInterval = setInterval(() => {
                    progressData[sectionId].progress += 5; // Increment progress
                    if (progressData[sectionId].progress >= 100) {
                        progressData[sectionId].progress = 100;
                        progressData[sectionId].completed = true;
                        clearInterval(progressInterval);
                    }
                    updateAllUI(sectionId);
                }, 150);
            };

            window.resetAllProgress = () => {
                journeySections.forEach(id => {
                    progressData[id] = { visited: false, progress: 0, completed: false };
                    updateAllUI(id);
                });
            };
            
            function updateAllUI(sectionId) {
                const circle = document.querySelector(`[data-progress="${sectionId}"]`);
                const text = document.querySelector(`[data-text="${sectionId}"]`);
                const radius = circle.r.baseVal.value;
                const circumference = 2 * Math.PI * radius;
                
                updateProgressRing(circle, progressData[sectionId].progress, circumference);
                updateTextView(text, progressData[sectionId].progress);
                updateStatusBadge(sectionId);
                updateReadingIndicator(sectionId);
                updateOverallProgress();
            }

            // Initial UI setup
            journeySections.forEach(id => updateAllUI(id));
        });
    </script>
</body>
</html>