<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Dukkha - Diagram Test Page</title>
    <meta name="description" content="Test page for Project Dukkha's SVG diagrams and their styling.">

    <style>
        /* =============================================
           CSS Custom Properties (Copied from styles.css for self-containment)
           ============================================= */
        :root {
          /* Colors - Light Mode */
          --color-primary: #1e293b;
          --color-primary-light: #334155;
          --color-accent: #c9a961;
          --color-accent-light: #d4b574;
          --color-background: #fefefe;
          --color-surface: #f8fafc;
          --color-surface-elevated: #ffffff;
          --color-text-primary: #0f172a;
          --color-text-secondary: #475569;
          --color-text-muted: #64748b;
          --color-success: #059669;
          --color-warning: #d97706;
          --color-error: #dc2626;
          
          /* Typography */
          --font-serif: 'Crimson Text', 'Times New Roman', serif;
          --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          --font-mono: 'SF Mono', 'Monaco', 'Cascadia Code', monospace;
          
          /* Font Sizes */
          --text-xs: 0.75rem;    /* 12px */
          --text-sm: 0.875rem;   /* 14px */
          --text-base: 1rem;     /* 16px */
          --text-lg: 1.125rem;   /* 18px */
          --text-xl: 1.25rem;    /* 20px */
          --text-2xl: 1.5rem;    /* 24px */
          --text-3xl: 1.875rem;  /* 30px */
          --text-4xl: 2.25rem;   /* 36px */
          --text-5xl: 3rem;      /* 48px */
          
          /* Spacing */
          --space-1: 0.25rem;    /* 4px */
          --space-2: 0.5rem;     /* 8px */
          --space-3: 0.75rem;    /* 12px */
          --space-4: 1rem;       /* 16px */
          --space-6: 1.5rem;     /* 24px */
          --space-8: 2rem;       /* 32px */
          --space-12: 3rem;      /* 48px */
          --space-16: 4rem;      /* 64px */
          --space-24: 6rem;      /* 96px */
          
          /* Layout */
          --container-width: 1200px;
          --container-padding: var(--space-6);
          --border-radius: 8px;
          --border-radius-lg: 12px;
          --shadow-sm: 0 1px 3px rgba(15, 23, 42, 0.08);
          --shadow-md: 0 4px 12px rgba(15, 23, 42, 0.1);
          --shadow-lg: 0 10px 30px rgba(15, 23, 42, 0.15);
          
          /* Animation */
          --transition-fast: 0.15s ease-out;
          --transition-normal: 0.25s ease-out;
          --transition-slow: 0.5s ease-out;
        }

        /* Dark Mode Variables */
        @media (prefers-color-scheme: dark) {
          :root {
            --color-primary: #f1f5f9;
            --color-primary-light: #e2e8f0;
            --color-accent: #c9a961;
            --color-accent-light: #d4b574;
            --color-background: #0f172a;
            --color-surface: #1e293b;
            --color-surface-elevated: #334155;
            --color-text-primary: #f8fafc;
            --color-text-secondary: #cbd5e1;
            --color-text-muted: #94a3b8;
            --color-border: #334155;
            --color-border-light: #475569;
          }
        }

        /* Base Styles for Test Page */
        body {
            font-family: var(--font-sans);
            background-color: var(--color-background);
            color: var(--color-text-primary);
            padding: var(--space-16);
            line-height: 1.6;
            transition: background-color var(--transition-normal), color var(--transition-normal);
        }

        h1, h2 {
            font-family: var(--font-serif);
            color: var(--color-primary);
            margin-bottom: var(--space-8);
            text-align: center;
        }

        section {
            background-color: var(--color-surface);
            border-radius: var(--border-radius-lg);
            padding: var(--space-12);
            margin-bottom: var(--space-16);
            box-shadow: var(--shadow-md);
        }

        section h3 {
            font-family: var(--font-serif);
            color: var(--color-accent);
            text-align: center;
            margin-bottom: var(--space-8);
            font-size: var(--text-3xl);
        }

        /* =============================================
           Diagram Specific Styles (To be added to your main styles.css)
           ============================================= */

        /* Base SVG Container Styling */
        .diagram-container {
            display: block;
            width: 100%;
            height: auto;
            margin: var(--space-8) auto;
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius-lg);
            background-color: var(--color-background); /* Background of the SVG canvas */
            box-shadow: var(--shadow-sm);
            padding: var(--space-4); /* Internal padding inside the border */
        }

        /* Default SVG Text Styling for consistency */
        .diagram-container text {
            font-family: var(--font-sans);
            fill: var(--color-text-primary); /* Default text color, overridden by specific node styles */
            user-select: none; /* Prevent text selection */
            font-weight: 500;
        }

        /* Node General Styles */
        .diagram-container rect.node {
            fill: var(--color-surface-elevated);
            stroke: var(--color-border);
            stroke-width: 2px;
            rx: 12px;
            ry: 12px;
            transition: fill var(--transition-normal), stroke var(--transition-normal);
        }
        .diagram-container text.node-text {
            fill: var(--color-text-primary);
            font-size: 16px;
        }

        /* Special Node Styles */
        .diagram-container rect.node.accent-node { /* For Anticipation & Craving node */
            fill: var(--color-accent);
            stroke: var(--color-accent);
        }
        .diagram-container text.node-text.on-accent {
            fill: var(--color-background); /* Text color when on accent node */
        }

        .diagram-container rect.node.intervention-node {
            fill: var(--color-surface-elevated); /* Keep intervention nodes distinct */
            stroke: var(--color-border);
            rx: 8px; /* Slightly sharper corners for intervention */
            ry: 8px;
        }
         .diagram-container text.node-text.intervention-text {
            fill: var(--color-text-primary);
            font-size: 14px;
        }

        .diagram-container rect.node.exit-node { /* For the oval exit nodes */
            fill: var(--color-accent-light);
            stroke: var(--color-accent);
            rx: 50px; /* Make them more oval */
            ry: 50px;
        }
        .diagram-container text.node-text.on-exit {
            fill: var(--color-primary-light);
            font-size: 14px;
        }

        /* Arrow Styles */
        .diagram-container path.arrow {
            fill: none;
            stroke: var(--color-text-secondary);
            stroke-width: 2px;
            marker-end: url(#arrowhead);
            transition: stroke var(--transition-normal);
        }
        .diagram-container path.dashed-arrow {
            stroke: var(--color-text-muted);
            stroke-dasharray: 6 3; /* Dashed */
            marker-end: url(#arrowhead-dashed);
        }
        .diagram-container text.arrow-label {
            fill: var(--color-text-muted);
            font-size: 12px;
        }

        /* Specific arrow coloring for the 'spike' link in Ping/Scroll Loop */
        .diagram-container path.arrow.spike-link {
            stroke: var(--color-accent);
            stroke-width: 2.5px;
        }

        /* Arrowhead colors for dark mode responsiveness */
        .diagram-container marker polygon {
            fill: var(--color-text-secondary); /* Default arrow fill */
        }
        .diagram-container marker#arrowhead-dashed polygon {
            fill: var(--color-text-muted); /* Dashed arrow fill */
        }
         .diagram-container marker#arrowhead-spike polygon {
            fill: var(--color-accent); /* Spike link arrow fill */
        }


        /* =============================================
           Specific Diagram Adjustments
           ============================================= */

        /* Dopamine Baseline vs. Spike */
        .dopamine-graph {
            max-width: 500px;
        }
        .dopamine-graph .baseline-line {
            stroke: var(--color-text-muted);
            stroke-dasharray: 4 2;
        }
        .dopamine-graph .dopamine-curve {
            stroke: var(--color-accent);
        }
        .dopamine-graph .axis-label {
            fill: var(--color-text-secondary);
        }
        .dopamine-graph .curve-label {
            fill: var(--color-accent);
        }

        /* Reward Compass */
        .reward-compass {
            max-width: 600px;
        }
        .reward-compass .axis-line {
            stroke: var(--color-text-muted);
        }
        .reward-compass .axis-label {
            fill: var(--color-text-secondary);
        }
        .reward-compass .quadrant-bg {
            fill: var(--color-surface); /* Default quadrant background */
        }
        /* Ensure dark mode flips quadrant colors too if desired */
        @media (prefers-color-scheme: dark) {
            .reward-compass .quadrant-bg {
                fill: var(--color-surface-elevated); /* Adjust for dark mode quadrants */
            }
        }

        .reward-compass .quadrant-text {
            fill: var(--color-text-muted);
        }
        .reward-compass .optimal-zone-marker {
            fill: var(--color-accent);
        }
        .reward-compass .compass-center-circle {
             fill: var(--color-accent);
             stroke: var(--color-background); /* White circle around center */
        }
        .reward-compass .compass-center-lines {
             stroke: var(--color-background); /* White lines in center */
        }

    </style>
</head>
<body>

    <h1>Project Dukkha - Diagram Test Page</h1>

    <section>
        <h3>1. The Ping/Scroll Loop (HTML/CSS/SVG)</h3>
        <svg viewBox="0 0 680 400" class="diagram-container">
            <title>The Ping/Scroll Loop</title>
            <desc>A flowchart illustrating the digital distraction loop with intervention points.</desc>

            <!-- Node Definitions -->
            <rect x="240" y="40" width="200" height="80" class="node accent-node"></rect>
            <text x="340" y="70" text-anchor="middle" class="node-text on-accent" font-size="17">Anticipation &</text>
            <text x="340" y="90" text-anchor="middle" class="node-text on-accent" font-size="17">Craving (Dopamine Spike)</text>

            <rect x="50" y="180" width="200" height="80" class="node"></rect>
            <text x="150" y="210" text-anchor="middle" class="node-text">External Cue</text>
            <text x="150" y="230" text-anchor="middle" class="node-text">/ Boredom</text>

            <rect x="430" y="180" width="200" height="80" class="node"></rect>
            <text x="530" y="210" text-anchor="middle" class="node-text">Interrupt Current</text>
            <text x="530" y="230" text-anchor="middle" class="node-text">Task to Check Feed</text>

            <rect x="240" y="300" width="200" height="80" class="node"></rect>
            <text x="340" y="330" text-anchor="middle" class="node-text">Brief Relief</text>
            <text x="340" y="350" text-anchor="middle" class="node-text">(Dopamine Spike)</text>
            <text x="340" y="370" text-anchor="middle" class="node-text">/ Variable Reward</text>

            <!-- Cycle Arrows -->
            <path d="M410 120 Q500 150 530 180" class="arrow spike-link" marker-end="url(#arrowhead-spike)"></path>
            <path d="M500 260 Q400 280 380 300" class="arrow" marker-end="url(#arrowhead)"></path>
            <path d="M280 380 Q180 290 150 260" class="arrow" marker-end="url(#arrowhead)"></path>
            <path d="M180 180 Q250 150 280 120" class="arrow" marker-end="url(#arrowhead)"></path>

            <!-- Intervention Nodes & Dashed Arrows -->
            <!-- Intervention -> Anticipation -->
            <rect x="60" y="40" width="100" height="40" class="node intervention-node"></rect>
            <text x="110" y="65" text-anchor="middle" class="node-text intervention-text">Intervention</text>
            <line x1="160" y1="60" x2="238" y2="60" class="arrow dashed-arrow"></line>

            <!-- Intervention from External Cue -> Turn Off Cue -->
            <rect x="90" y="300" width="140" height="40" class="node intervention-node"></rect>
            <text x="160" y="325" text-anchor="middle" class="node-text intervention-text">Turn Off Cue</text>
            <line x1="150" y1="260" x2="150" y2="300" class="dashed-arrow" stroke-dasharray="6 3"></line>
            <text x="150" y="280" text-anchor="middle" class="arrow-label">Intervention</text>

            <!-- Intervention from Interrupt Task -> Mindful Pause -->
            <rect x="470" y="300" width="140" height="40" class="node intervention-node"></rect>
            <text x="540" y="325" text-anchor="middle" class="node-text intervention-text">Mindful</text>
            <text x="540" y="345" text-anchor="middle" class="node-text intervention-text">Pause</text>
            <line x1="530" y1="260" x2="530" y2="300" class="dashed-arrow" stroke-dasharray="6 3"></line>
            <text x="530" y="280" text-anchor="middle" class="arrow-label">Mindful Pause</text>

            <!-- Intervention (dashed) from Anticipation to Interrupt -->
            <line x1="440" y1="90" x2="480" y2="180" class="dashed-arrow"></line>
            <text x="470" y="150" text-anchor="middle" class="arrow-label">Intervention</text>


            <!-- Arrowhead Definitions -->
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="var(--color-text-secondary)" />
                </marker>
                 <marker id="arrowhead-dashed" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="var(--color-text-muted)" />
                </marker>
                 <marker id="arrowhead-spike" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="var(--color-accent)" />
                </marker>
            </defs>
        </svg>
    </section>

    <section>
        <h3>2. Dopamine Baseline vs. Spike (HTML/CSS/SVG)</h3>
        <svg viewBox="0 0 400 250" class="diagram-container dopamine-graph" aria-labelledby="dopamineGraphTitle dopamineGraphDesc">
            <title id="dopamineGraphTitle">Dopamine Baseline vs. Spike</title>
            <desc id="dopamineGraphDesc">A line graph showing a sharp dopamine spike followed by a dip below baseline over time.</desc>

            <!-- Axes -->
            <line x1="50" y1="200" x2="350" y2="200" class="axis-line"></line> <!-- X-axis -->
            <line x1="50" y1="200" x2="50" y2="50" class="axis-line"></line>   <!-- Y-axis -->

            <!-- Axis Labels -->
            <text x="350" y="215" text-anchor="end" class="axis-label" font-size="12">Time</text>
            <text x="35" y="55" text-anchor="middle" class="axis-label" font-size="12" transform="rotate(-90 35 55)">Dopamine Level (Relative)</text>

            <!-- Baseline (dashed line) -->
            <line x1="50" y1="120" x2="350" y2="120" class="baseline-line" stroke-width="1.5"></line>
            <text x="355" y="125" text-anchor="start" class="axis-label" font-size="11">Baseline</text>

            <!-- Dopamine Level curve - Smoother path -->
            <path d="M50,120 C 70,120 85,70 110,50 C135,30 160,180 185,190 C210,200 240,150 270,130 C300,110 325,115 350,120"
                  fill="none" class="dopamine-curve" stroke-width="3" stroke-linecap="round"></path>
            <text x="110" y="40" text-anchor="middle" class="curve-label" font-size="11">Dopamine Level</text>
        </svg>
    </section>

    <section>
        <h3>3. Stress-Sensitization Loop (HTML/CSS/SVG)</h3>
        <svg viewBox="0 0 680 450" class="diagram-container stress-sensitization-loop-diagram">
            <title>The Stress-Reward Sensitization Loop and How to Break It</title>
            <desc>A flowchart depicting how acute stress leads to impulsive reward-seeking, negative baseline drops, and self-reinforcing stress, with strategic exit points shown.</desc>

            <!-- Main Loop Nodes -->
            <rect x="240" y="40" width="200" height="60" class="node"></rect>
            <text x="340" y="75" text-anchor="middle" class="node-text">Stress / Anxiety</text>

            <rect x="240" y="140" width="200" height="60" class="node"></rect>
            <text x="340" y="175" text-anchor="middle" class="node-text">Attention on Quick Rewards</text>

            <rect x="240" y="240" width="200" height="60" class="node"></rect>
            <text x="340" y="275" text-anchor="middle" class="node-text">Impulse / Short-term Reward-Seeking</text>

            <rect x="240" y="340" width="200" height="60" class="node"></rect>
            <text x="340" y="375" text-anchor="middle" class="node-text">Brief Relief (Dopamine Spike)</text>

            <rect x="240" y="440" width="200" height="60" class="node"></rect>
            <text x="340" y="475" text-anchor="middle" class="node-text">Baseline Drops</text>
            <text x="340" y="495" text-anchor="middle" class="node-text">(Mood, Energy Down)</text>

            <rect x="240" y="540" width="200" height="60" class="node"></rect>
            <text x="340" y="575" text-anchor="middle" class="node-text">More Stress, Regret or Fatigue</text>

            <!-- Main Loop Arrows -->
            <path d="M340 100 V140" class="arrow" marker-end="url(#arrowhead)"></path>
            <path d="M340 200 V240" class="arrow" marker-end="url(#arrowhead)"></path>
            <path d="M340 300 V340" class="arrow" marker-end="url(#arrowhead)"></path>
            <path d="M340 400 V440" class="arrow" marker-end="url(#arrowhead)"></path>
            <path d="M340 500 V540" class="arrow" marker-end="url(#arrowhead)"></path>
            <path d="M340 600 C300 650 100 650 100 570 C100 500 200 450 240 440" class="arrow" marker-end="url(#arrowhead)"></path>
            <path d="M240 540 C100 530 50 400 50 350 C50 300 150 250 240 240" class="arrow" marker-end="url(#arrowhead)"></path>
            <path d="M240 40 C100 -10 50 100 50 150 C50 200 150 220 240 240" class="arrow" marker-end="url(#arrowhead)"></path>


            <!-- Exit Points -->
            <!-- Exit: Breathwork or Pause -->
            <rect x="20" y="60" width="160" height="50" class="node exit-node" rx="25" ry="25"></rect>
            <text x="100" y="90" text-anchor="middle" class="node-text on-exit">Exit: Breathwork or Pause</text>
            <line x1="240" y1="70" x2="180" y2="85" class="dashed-arrow" stroke-dasharray="6 3"></line>

            <!-- Exit: Exercise or Social Support -->
            <rect x="490" y="160" width="160" height="50" class="node exit-node" rx="25" ry="25"></rect>
            <text x="570" y="190" text-anchor="middle" class="node-text on-exit">Exit: Exercise or Social support</text>
            <line x1="440" y1="170" x2="490" y2="185" class="dashed-arrow" stroke-dasharray="6 3"></line>

            <!-- Exit: Plan / Reflection -->
            <rect x="20" y="370" width="160" height="50" class="node exit-node" rx="25" ry="25"></rect>
            <text x="100" y="400" text-anchor="middle" class="node-text on-exit">Exit: Plan / Reflection</text>
            <line x1="240" y1="370" x2="180" y2="395" class="dashed-arrow" stroke-dasharray="6 3"></line>


            <!-- Arrowhead Definitions (re-defined for this SVG to ensure self-containment) -->
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="var(--color-text-secondary)" />
                </marker>
                 <marker id="arrowhead-dashed" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="var(--color-text-muted)" />
                </marker>
            </defs>
        </svg>
    </section>

    <section>
        <h3>4. The Reward Compass (HTML/CSS/SVG)</h3>
        <svg viewBox="0 0 500 400" class="diagram-container reward-compass" aria-labelledby="rewardCompassTitle rewardCompassDesc">
            <title id="rewardCompassTitle">The Reward Compass</title>
            <desc id="rewardCompassDesc">A 2D coordinate plane showing Dopamine Baseline Level and Sensitivity vs. Tolerance, with conceptual zones.</desc>

            <!-- Axes -->
            <line x1="50" y1="350" x2="450" y2="350" class="axis-line"></line> <!-- X-axis -->
            <line x1="250" y1="50" x2="250" y2="350" class="axis-line"></line> <!-- Y-axis -->

            <!-- Axis Labels -->
            <text x="450" y="365" text-anchor="end" class="axis-label" font-size="12">Spike vs. Sensitivity</text>
            <text x="250" y="380" text-anchor="middle" class="axis-label" font-size="10">(High Spikes / Low Sensitivity &rarr; Low Spikes / High Sensitivity)</text>

            <text x="265" y="55" text-anchor="start" class="axis-label" font-size="12" transform="rotate(-90 265 55)">Baseline Level</text>
            <text x="240" y="65" text-anchor="end" class="axis-label" font-size="10">(Low &rarr; High)</text>

            <!-- Quadrant Backgrounds -->
            <!-- Bottom-Left: Low Drive / Anhedonia -->
            <rect x="50" y="200" width="200" height="150" class="quadrant-bg"></rect>
            <text x="150" y="275" text-anchor="middle" class="quadrant-text" font-size="14">Low Drive / Anhedonia</text>

            <!-- Top-Left: Optimal Flow / Contentment -->
            <rect x="50" y="50" width="200" height="150" class="quadrant-bg"></rect>
            <text x="150" y="125" text-anchor="middle" class="quadrant-text" font-size="14">Optimal Flow / Contentment</text>
            <circle cx="150" cy="110" r="6" class="optimal-zone-marker"></circle> <!-- Clearer marker for optimal zone -->


            <!-- Bottom-Right: High Spikes / Low Sensitivity -->
            <rect x="250" y="200" width="200" height="150" class="quadrant-bg"></rect>
            <text x="350" y="275" text-anchor="middle" class="quadrant-text" font-size="14">High Spikes / Low Sensitivity</text>

            <!-- Top-Right: Compulsive Seeking / Burnout -->
            <rect x="250" y="50" width="200" height="150" class="quadrant-bg"></rect>
            <text x="350" y="125" text-anchor="middle" class="quadrant-text" font-size="14">Compulsive Seeking / Burnout</text>

            <!-- Subtle Compass Motif -->
            <circle cx="250" cy="200" r="8" class="compass-center-circle"></circle>
            <line x1="250" y1="190" x2="250" y2="210" class="compass-center-lines" stroke-width="1.5"></line>
            <line x1="240" y1="200" x2="260" y2="200" class="compass-center-lines" stroke-width="1.5"></line>
        </svg>
    </section>

</body>
</html>