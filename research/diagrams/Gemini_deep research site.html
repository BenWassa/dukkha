<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Dukkha: An Interactive Guide to the Mind</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Dukkha - A Muted & Harmonious Palette -->
    <!-- Application Structure Plan: The application is structured as a single-page, vertical-scrolling narrative, mimicking a premium digital guidebook. A sticky top navigation allows users to jump to any of the four core concepts (The Loop, The Curve, The Spiral, The Compass), supporting both linear discovery and direct access. Each concept is presented in a dedicated section with an introductory paragraph, an interactive visualization, and contextual information that appears on interaction. This structure was chosen to guide the user through a logical learning journeyâ€”from identifying the problem (The Loop) to understanding its neurological basis (The Curve), its connection to stress (The Spiral), and finally, a framework for self-assessment and improvement (The Compass). This sequential yet flexible structure enhances usability and comprehension. -->
    <!-- Visualization & Content Choices: 1. Ping/Scroll Loop: Goal=Inform. Viz=Custom HTML/CSS flowchart. Interaction=Hover/click on nodes reveals detailed text. Justification=Maintains minimalist aesthetic while providing deep-dive information on demand. 2. Dopamine Curve: Goal=Change/Compare. Viz=Chart.js Line Chart. Interaction=Detailed tooltips and an animated "play" button to show the curve's progression. Justification=Chart.js effectively renders scientific data, and animation makes the temporal aspect of recovery intuitive. 3. Stress-Sensitization Loop: Goal=Organize. Viz=Custom HTML/CSS descending flowchart. Interaction=Clicking "Exit Points" provides actionable advice. Justification=Custom layout captures the "downward spiral" metaphor effectively. 4. Reward Compass: Goal=Organize/Inform. Viz=HTML/CSS 2x2 Matrix. Interaction=Clicking quadrants expands detailed descriptions. Justification=Transforms a static model into an interactive self-assessment tool. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        :root {
            --color-primary: #8C7851;
            --color-secondary: #B1A384;
            --color-accent: #E8D38D;
            --color-background: #F8F4EC;
            --color-surface: #FFFFFF;
            --color-text-primary: #3C3322;
            --color-text-secondary: #7A6F5E;
            --color-border: #D1C5B3;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-background);
            color: var(--color-text-primary);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .nav-link {
            transition: color 0.2s ease-in-out;
        }
        .nav-link:hover, .nav-link.active {
            color: var(--color-primary);
        }
        .diagram-node {
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        .diagram-node:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        .compass-quadrant {
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        .compass-quadrant:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        .compass-quadrant.optimal:hover {
            transform: scale(1.04);
            box-shadow: 0 10px 20px rgba(232, 211, 141, 0.4);
        }
        .content-fade-in {
            animation: fadeIn 0.5s ease-in-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .arrow-path {
            stroke: var(--color-border);
            stroke-width: 2;
            fill: none;
            transition: stroke-dashoffset 1s ease-in-out;
        }
        .loop-arrow {
            stroke: var(--color-secondary);
        }
        .loop-accent-arrow {
            stroke: var(--color-primary);
            stroke-width: 2.5;
        }
        .spiral-arrow {
            stroke: var(--color-secondary);
        }
        .tooltip-container {
            background-color: var(--color-surface);
            border-radius: 8px;
            padding: 12px;
            border: 1px solid var(--color-border);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .chartjs-tooltip {
            background-color: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 6px;
            padding: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            color: var(--color-text-primary);
        }
    </style>
</head>
<body class="antialiased">

    <header class="sticky top-0 z-50 bg-white/80 backdrop-blur-lg border-b border-[var(--color-border)]">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl font-bold text-[var(--color-primary)]">Project Dukkha</h1>
            <div class="hidden md:flex items-center space-x-8">
                <a href="#loop" class="nav-link text-sm font-medium text-[var(--color-text-secondary)]">The Loop</a>
                <a href="#curve" class="nav-link text-sm font-medium text-[var(--color-text-secondary)]">The Curve</a>
                <a href="#spiral" class="nav-link text-sm font-medium text-[var(--color-text-secondary)]">The Spiral</a>
                <a href="#compass" class="nav-link text-sm font-medium text-[var(--color-text-secondary)]">The Compass</a>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-12 md:py-20">

        <section class="text-center mb-20 md:mb-32">
            <h2 class="text-4xl md:text-5xl font-bold tracking-tight mb-4">An Interactive Guide to the Mind</h2>
            <p class="max-w-3xl mx-auto text-lg text-[var(--color-text-secondary)]">
                Explore four core concepts that explain the hidden forces shaping our digital lives, stress responses, and overall well-being. This guide translates complex psychology into interactive visualizations.
            </p>
        </section>

        <!-- Section 1: The Ping/Scroll Loop -->
        <section id="loop" class="mb-20 md:mb-32 scroll-mt-20">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold mb-2">The Ping/Scroll Loop</h3>
                <p class="max-w-2xl mx-auto text-[var(--color-text-secondary)]">This diagram reveals the relentless, self-reinforcing cycle of digital distraction. It's a neurobiological loop that feels inescapable but can be broken with deliberate intervention. Interact with the nodes to understand each stage of this powerful process.</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-center">
                <div class="lg:col-span-2 relative h-[500px] flex items-center justify-center">
                    <!-- Diagram Nodes -->
                    <div id="loop-node-1" data-content="loop-content-1" class="diagram-node absolute top-[10%] left-1/2 -translate-x-1/2 p-4 w-48 text-center bg-[var(--color-surface)] border border-[var(--color-border)] rounded-xl">
                        <h4 class="font-semibold text-[var(--color-primary)]">Trigger</h4>
                        <p class="text-xs text-[var(--color-text-secondary)]">e.g., Notification, Boredom</p>
                    </div>
                    <div id="loop-node-2" data-content="loop-content-2" class="diagram-node absolute top-1/2 -translate-y-1/2 left-[5%] p-4 w-48 text-center bg-[var(--color-surface)] border border-[var(--color-border)] rounded-xl">
                        <h4 class="font-semibold text-[var(--color-primary)]">Seeking / Scrolling</h4>
                        <p class="text-xs text-[var(--color-text-secondary)]">The compulsive action</p>
                    </div>
                    <div id="loop-node-3" data-content="loop-content-3" class="diagram-node absolute bottom-[10%] left-1/2 -translate-x-1/2 p-4 w-48 text-center bg-[var(--color-surface)] border border-[var(--color-border)] rounded-xl">
                        <h4 class="font-semibold text-[var(--color-primary)]">Brief, Unfulfilling Relief</h4>
                        <p class="text-xs text-[var(--color-text-secondary)]">A momentary distraction</p>
                    </div>
                    <div id="loop-node-4" data-content="loop-content-4" class="diagram-node absolute top-1/2 -translate-y-1/2 right-[5%] p-4 w-48 text-center bg-[var(--color-accent)] text-white border border-transparent rounded-xl shadow-lg">
                        <h4 class="font-semibold text-[var(--color-primary)]">Anticipation & Craving</h4>
                        <p class="text-xs opacity-80 text-[var(--color-text-primary)]">Dopamine Spike</p>
                    </div>
                    <!-- Arrows (upgraded visual; explicit colors & larger markers for consistent rendering) -->
                    <svg class="absolute w-full h-full top-0 left-0" viewBox="0 0 500 500" style="pointer-events: none;" aria-hidden="true">
                        <defs>
                            <linearGradient id="loopGrad" x1="0" x2="1">
                                <stop offset="0" stop-color="#B1A384" />
                                <stop offset="1" stop-color="#8C7851" />
                            </linearGradient>
                            <filter id="dropSmallLoop" x="-20%" y="-20%" width="140%" height="140%">
                                <feDropShadow dx="0" dy="8" stdDeviation="10" flood-color="#000" flood-opacity="0.08"/>
                            </filter>
                            <!-- markers scale with stroke width for consistent sizing -->
                            <marker id="arrowhead-loop" markerWidth="18" markerHeight="14" refX="18" refY="7" orient="auto" markerUnits="strokeWidth">
                                <polygon points="0 0, 18 7, 0 14" fill="#B1A384" />
                            </marker>
                            <marker id="arrowhead-accent" markerWidth="22" markerHeight="18" refX="22" refY="9" orient="auto" markerUnits="strokeWidth">
                                <polygon points="0 0, 22 9, 0 18" fill="#8C7851" />
                            </marker>
                        </defs>
+
                        <!-- subtle background track (soft, thick) -->
                        <g filter="url(#dropSmallLoop)">
                            <path d="M 250 80 C 130 120 130 260 160 330 C 200 410 320 430 380 370 C 430 320 420 200 370 160 C 330 130 290 100 250 80"
                                  fill="none" stroke="#f1f5f9" stroke-width="24" stroke-linecap="round" stroke-linejoin="round"/>
                        </g>
+
                        <!-- accent stroke showing direction (thicker for visibility) -->
                        <path d="M 250 80 C 150 120 150 240 180 300 C 220 370 320 390 360 350 C 400 310 390 210 350 180 C 320 155 290 120 250 80"
                              fill="none" stroke="url(#loopGrad)" stroke-width="8" stroke-linecap="round" stroke-linejoin="round" marker-end="url(#arrowhead-accent)"/>
+
                        <!-- numbered badges for visual clarity (white fill + subtle stroke) -->
+
                        <g font-family="Inter, Arial, sans-serif" font-size="12" fill="#3C3322" text-anchor="middle">
                            <circle cx="250" cy="80" r="16" fill="#FFFFFF" stroke="#D1C5B3" stroke-width="1.5"/>
+                            <text x="250" y="86" font-weight="700">1</text>
+
                            <circle cx="130" cy="250" r="16" fill="#FFFFFF" stroke="#D1C5B3" stroke-width="1.5"/>
+                            <text x="130" y="256" font-weight="700">2</text>
+
                            <circle cx="250" cy="420" r="16" fill="#FFFFFF" stroke="#D1C5B3" stroke-width="1.5"/>
+                            <text x="250" y="426" font-weight="700">3</text>
+
                            <circle cx="370" cy="250" r="16" fill="#E8D38D" stroke="#bfae72" stroke-width="0.5"/>
+                            <text x="370" y="256" font-weight="700" fill="#ffffff">4</text>
+                        </g>
+
                    </svg>
                    <!-- Intervention Points -->
                    <div id="loop-node-5" data-content="loop-content-5" class="diagram-node absolute top-[25%] left-[2%] p-2 px-4 text-center bg-[var(--color-surface)] border border-dashed border-[var(--color-text-secondary)] rounded-full">
                        <span class="text-sm font-medium text-[var(--color-primary)]">Intervention</span>
                    </div>
                </div>
                <div id="loop-content-display" class="bg-[var(--color-surface)] p-6 rounded-xl border border-[var(--color-border)] min-h-[300px] shadow-sm">
                    <div id="loop-content-default">
                        <h4 class="font-bold text-lg mb-2">The Anatomy of Distraction</h4>
                        <p class="text-[var(--color-text-secondary)]">Click on a node in the diagram to learn more about each stage of the cycle and how to build awareness around it.</p>
                    </div>
                    <div id="loop-content-1" class="hidden content-fade-in"><h4 class="font-bold text-lg mb-2 text-[var(--color-primary)]">Trigger</h4><p class="text-[var(--color-text-secondary)]">The cycle begins with a trigger, either external (a notification) or internal (a feeling of boredom or anxiety). This is the cue that kicks off the automated habit.</p></div>
                    <div id="loop-content-2" class="hidden content-fade-in"><h4 class="font-bold text-lg mb-2 text-[var(--color-primary)]">Seeking / Scrolling</h4><p class="text-[var(--color-text-secondary)]">Driven by the craving for a reward, you engage in the behaviorâ€”opening the app, scrolling the feed. This action is often automatic, performed without conscious thought.</p></div>
                    <div id="loop-content-3" class="hidden content-fade-in"><h4 class="font-bold text-lg mb-2 text-[var(--color-primary)]">Brief, Unfulfilling Relief</h4><p class="text-[var(--color-text-secondary)]">The "reward" is often fleeting and unsatisfying. It provides a momentary distraction from the initial trigger but doesn't resolve the underlying feeling, ensuring the cycle continues.</p></div>
                    <div id="loop-content-4" class="hidden content-fade-in"><h4 class="font-bold text-lg mb-2 text-[var(--color-primary)]">Anticipation & Craving</h4><p class="text-[var(--color-text-secondary)]">This is the critical stage. Your brain releases dopamine not in response to the reward itself, but in *anticipation* of it. This creates a powerful "wanting" or craving that drives you to act.</p></div>
                    <div id="loop-content-5" class="hidden content-fade-in"><h4 class="font-bold text-lg mb-2 text-[var(--color-primary)]">Intervention Points</h4><p class="text-[var(--color-text-secondary)]">Breaking the loop requires a conscious "off-ramp." This involves pausing, noticing the urge without acting on it, and choosing a different, more intentional action. This is where you reclaim your agency.</p></div>
                </div>
            </div>
        </section>

        <!-- Section 2: The Dopamine Curve -->
        <section id="curve" class="mb-20 md:mb-32 scroll-mt-20">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold mb-2">The Dopamine Curve</h3>
                <p class="max-w-2xl mx-auto text-[var(--color-text-secondary)]">This scientific graph shows the neurobiological consequence of the Ping/Scroll Loop. It illustrates how repeated dopamine spikes lead to a crash below your baseline, driving tolerance and compulsive behavior. The slow return to baseline shows the path to recovery.</p>
            </div>
            <div class="bg-[var(--color-surface)] p-4 sm:p-6 rounded-xl border border-[var(--color-border)] shadow-sm">
                <div class="chart-container">
                    <canvas id="dopamineChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Section 3: The Stress-Sensitization Loop -->
        <section id="spiral" class="mb-20 md:mb-32 scroll-mt-20">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold mb-2">The Stress-Sensitization Loop</h3>
                <p class="max-w-2xl mx-auto text-[var(--color-text-secondary)]">Discover the detrimental feedback loop where stress fuels maladaptive coping strategies (like distraction), which in turn depletes resources and amplifies stress, creating a downward spiral. The key is to find the hopeful, actionable exit points.</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-center">
                <div class="lg:col-span-2 relative h-[550px] flex items-center justify-center">
                    <!-- Diagram Nodes -->
                    <div id="spiral-node-1" data-content="spiral-content-1" class="diagram-node absolute top-[5%] left-1/2 -translate-x-1/2 p-3 w-52 text-center bg-[var(--color-surface)] border border-[var(--color-border)] rounded-xl"><h4 class="font-semibold text-[var(--color-primary)]">Stress / Anxiety</h4></div>
                    <div id="spiral-node-2" data-content="spiral-content-2" class="diagram-node absolute top-[25%] right-[15%] p-3 w-52 text-center bg-[var(--color-surface)] border border-[var(--color-border)] rounded-xl"><h4 class="font-semibold text-[var(--color-primary)]">Attention on Quick Rewards</h4></div>
                    <div id="spiral-node-3" data-content="spiral-content-3" class="diagram-node absolute top-[45%] right-[15%] p-3 w-52 text-center bg-[var(--color-accent)] text-white rounded-xl shadow-lg"><h4 class="font-semibold text-[var(--color-primary)]">Impulse & Brief Relief</h4></div>
                    <div id="spiral-node-4" data-content="spiral-content-4" class="diagram-node absolute top-[65%] left-[15%] p-3 w-52 text-center bg-[var(--color-surface)] border border-[var(--color-border)] rounded-xl"><h4 class="font-semibold text-[var(--color-primary)]">Baseline Drops / Resources Depleted</h4></div>
                    <div id="spiral-node-5" data-content="spiral-content-5" class="diagram-node absolute top-[85%] left-1/2 -translate-x-1/2 p-3 w-52 text-center bg-[var(--color-surface)] border border-[var(--color-border)] rounded-xl"><h4 class="font-semibold text-[var(--color-primary)]">Increased Sensitivity to Stress</h4></div>
                    <!-- Arrows (upgraded spiral visual) -->
                    <svg class="absolute w-full h-full top-0 left-0" viewBox="0 0 500 500" style="pointer-events: none;">
                        <defs>
                            <linearGradient id="spiralGrad" x1="0" x2="1">
                                <stop offset="0" stop-color="var(--color-secondary)" />
                                <stop offset="1" stop-color="var(--color-primary)" />
                            </linearGradient>
                            <filter id="ds"><feDropShadow dx="0" dy="8" stdDeviation="10" flood-color="#000" flood-opacity="0.06"/></filter>
                            <marker id="arrowhead-spiral" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="var(--color-secondary)"/></marker>
                        </defs>

                        <!-- subtle track for the spiral -->
                        <g filter="url(#ds)">
                            <path d="M 250 55 C 340 90 340 130 310 150 C 300 170 300 210 300 240"
                                  fill="none" stroke="#f3f5f7" stroke-width="18" stroke-linecap="round"/>
                        </g>

                        <!-- accent path showing progression -->
                        <path d="M 250 55 C 340 90 340 130 310 150 C 295 170 285 200 295 240 C 300 270 260 290 210 320"
                              fill="none" stroke="url(#spiralGrad)" stroke-width="6" stroke-linecap="round" stroke-linejoin="round" marker-end="url(#arrowhead-spiral)"/>

                        <!-- connector to lower nodes -->
                        <path d="M 210 320 C 190 340 180 370 200 400 C 230 440 280 440 300 460"
                              fill="none" stroke="var(--color-secondary)" stroke-width="3" stroke-linecap="round" marker-end="url(#arrowhead-spiral)"/>

                        <!-- sweeping return loop (dashed) -->
                        <path d="M 300 480 C 300 500 80 460 120 260 C 160 80 250 40 250 60"
                              fill="none" stroke="var(--color-primary)" stroke-width="2" stroke-dasharray="6,5" marker-end="url(#arrowhead-spiral)"/>
                    </svg>
                    <!-- Arrows (upgraded spiral visual; explicit colors & clearer markers) -->
                    <svg class="absolute w-full h-full top-0 left-0" viewBox="0 0 500 500" style="pointer-events: none;" aria-hidden="true">
                        <defs>
                            <linearGradient id="spiralGrad" x1="0" x2="1">
                                <stop offset="0" stop-color="#B1A384" />
                                <stop offset="1" stop-color="#8C7851" />
                            </linearGradient>
                            <filter id="dropSpiral" x="-20%" y="-20%" width="140%" height="140%">
                                <feDropShadow dx="0" dy="9" stdDeviation="12" flood-color="#000" flood-opacity="0.06"/>
                            </filter>
                            <marker id="arrowhead-spiral" markerWidth="18" markerHeight="14" refX="18" refY="7" orient="auto" markerUnits="strokeWidth">
                                <polygon points="0 0, 18 7, 0 14" fill="#B1A384" />
                            </marker>
                        </defs>

                        <!-- subtle track for the spiral -->
                        <g filter="url(#dropSpiral)">
                            <path d="M 250 55 C 340 90 340 130 310 150 C 300 170 300 210 300 240"
                                  fill="none" stroke="#f3f5f7" stroke-width="20" stroke-linecap="round"/>
                        </g>

                        <!-- accent path showing progression (thicker) -->
                        <path d="M 250 55 C 340 90 340 130 310 150 C 295 170 285 200 295 240 C 300 270 260 290 210 320"
                              fill="none" stroke="url(#spiralGrad)" stroke-width="8" stroke-linecap="round" stroke-linejoin="round" marker-end="url(#arrowhead-spiral)"/>

                        <!-- connector to lower nodes -->
                        <path d="M 210 320 C 190 340 180 370 200 400 C 230 440 280 440 300 460"
                              fill="none" stroke="#B1A384" stroke-width="4" stroke-linecap="round" marker-end="url(#arrowhead-spiral)"/>

                        <!-- sweeping return loop (dashed & visible) -->
                        <path d="M 300 480 C 300 500 80 460 120 260 C 160 80 250 40 250 60"
                              fill="none" stroke="#8C7851" stroke-width="2.5" stroke-dasharray="6,5" marker-end="url(#arrowhead-spiral)"/>
                    </svg>
                     <!-- Exit Points -->
                    <div id="spiral-node-6" data-content="spiral-content-6" class="diagram-node absolute top-[30%] left-[5%] p-2 px-4 text-center bg-[var(--color-surface)] border border-dashed border-[var(--color-text-secondary)] rounded-full"><span class="text-sm font-medium text-[var(--color-primary)]">Exit: Mindfulness</span></div>
                    <div id="spiral-node-7" data-content="spiral-content-7" class="diagram-node absolute top-[60%] right-[5%] p-2 px-4 text-center bg-[var(--color-surface)] border border-dashed border-[var(--color-text-secondary)] rounded-full"><span class="text-sm font-medium text-[var(--color-primary)]">Exit: Action</span></div>
                </div>
                <div id="spiral-content-display" class="bg-[var(--color-surface)] p-6 rounded-xl border border-[var(--color-border)] min-h-[300px] shadow-sm">
                    <div id="spiral-content-default"><h4 class="font-bold text-lg mb-2">The Downward Spiral</h4><p class="text-[var(--color-text-secondary)]">Click on a node or an "Exit Point" to understand how stress can escalate and, more importantly, how you can step out of the cycle.</p></div>
                    <div id="spiral-content-1" class="hidden content-fade-in"><h4 class="font-bold text-lg mb-2 text-[var(--color-primary)]">Stress / Anxiety</h4><p class="text-[var(--color-text-secondary)]">The process begins with a stressor. Over time, individuals can become "sensitized," meaning smaller and smaller stressors can trigger a strong negative response.</p></div>
                    <div id="spiral-content-2" class="hidden content-fade-in"><h4 class="font-bold text-lg mb-2 text-[var(--color-primary)]">Attention on Quick Rewards</h4><p class="text-[var(--color-text-secondary)]">To cope with the stress, attention shifts to maladaptive, quick-fix rewards like digital distraction. This is an attempt to escape the negative feeling.</p></div>
                    <div id="spiral-content-3" class="hidden content-fade-in"><h4 class="font-bold text-lg mb-2 text-[var(--color-primary)]">Impulse & Brief Relief</h4><p class="text-[var(--color-text-secondary)]">Acting on the impulse provides a brief dopamine-driven relief, reinforcing the idea that this coping mechanism "works." However, it doesn't address the root cause of the stress.</p></div>
                    <div id="spiral-content-4" class="hidden content-fade-in"><h4 class="font-bold text-lg mb-2 text-[var(--color-primary)]">Baseline Drops</h4><p class="text-[var(--color-text-secondary)]">As shown in the Dopamine Curve, this relief is followed by a drop in baseline mood and a depletion of internal resources like willpower and focus, leaving you more vulnerable.</p></div>
                    <div id="spiral-content-5" class="hidden content-fade-in"><h4 class="font-bold text-lg mb-2 text-[var(--color-primary)]">Increased Sensitivity</h4><p class="text-[var(--color-text-secondary)]">With depleted resources, your resilience is lower. You become even more sensitive to the next stressor, which can now trigger the cycle more easily, creating a downward spiral.</p></div>
                    <div id="spiral-content-6" class="hidden content-fade-in"><h4 class="font-bold text-lg mb-2 text-[var(--color-primary)]">Exit: Mindfulness</h4><p class="text-[var(--color-text-secondary)]">The first exit is awareness. By practicing mindfulness (e.g., breathwork, meditation), you can observe the initial stress without reacting, creating a space to choose a healthier response.</p></div>
                    <div id="spiral-content-7" class="hidden content-fade-in"><h4 class="font-bold text-lg mb-2 text-[var(--color-primary)]">Exit: Action</h4><p class="text-[var(--color-text-secondary)]">The second exit is taking small, positive actions that address the stressor or improve your state (e.g., exercise, talking to a friend). This builds real resilience instead of seeking temporary escape.</p></div>
                </div>
            </div>
        </section>

        <!-- Section 4: The Reward Compass -->
        <section id="compass" class="scroll-mt-20">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold mb-2">The Reward Compass</h3>
                <p class="max-w-2xl mx-auto text-[var(--color-text-secondary)]">This 2x2 matrix serves as a navigational tool for self-awareness. It integrates the previous concepts to help you map your current motivational and emotional state, and guides you toward the optimal zone of well-being. Click a quadrant to learn more.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
                <div class="relative grid grid-cols-2 grid-rows-2 gap-2 bg-[var(--color-border)] p-2 rounded-xl shadow-lg">
                    <!-- Axes Labels -->
                    <div class="absolute -top-8 left-1/2 -translate-x-1/2 text-sm font-medium text-[var(--color-text-secondary)]">Spike vs. Sensitivity â†’</div>
                    <div class="absolute -left-8 top-1/2 -translate-y-1/2 -rotate-90 text-sm font-medium text-[var(--color-text-secondary)]">Dopamine Baseline â†’</div>

                    <div id="quadrant-1" class="compass-quadrant p-6 rounded-tl-lg bg-[var(--color-surface)] text-center h-48 flex flex-col justify-center border-2 border-[var(--color-border)]">
                        <h4 class="font-bold text-[var(--color-primary)]">High Spikes / Low Sensitivity</h4>
                        <p class="text-xs text-[var(--color-text-secondary)]">Habituated State</p>
                    </div>
                    <div id="quadrant-2" class="compass-quadrant optimal p-6 rounded-tr-lg bg-[var(--color-accent)] text-white text-center h-48 flex flex-col justify-center border-2 border-[var(--color-accent)] relative">
                         <div class="absolute top-2 right-2 text-xs font-bold text-[var(--color-primary)]">OPTIMAL</div>
                        <h4 class="font-bold text-[var(--color-primary)]">Optimal Flow / Contentment</h4>
                        <p class="text-xs opacity-80 text-[var(--color-text-primary)]">Healthy State</p>
                    </div>
                    <div id="quadrant-3" class="compass-quadrant p-6 rounded-bl-lg bg-[var(--color-surface)] text-center h-48 flex flex-col justify-center border-2 border-[var(--color-border)]">
                        <h4 class="font-bold text-[var(--color-primary)]">Compulsive Seeking / Burnout</h4>
                        <p class="text-xs text-[var(--color-text-secondary)]">Dysregulated State</p>
                    </div>
                    <div id="quadrant-4" class="compass-quadrant p-6 rounded-br-lg bg-[var(--color-surface)] text-center h-48 flex flex-col justify-center border-2 border-[var(--color-border)]">
                        <h4 class="font-bold text-[var(--color-primary)]">Low Drive / Anhedonia</h4>
                        <p class="text-xs text-[var(--color-text-secondary)]">Depleted State</p>
                    </div>
                </div>

                <div id="compass-content-display" class="bg-[var(--color-surface)] p-6 rounded-xl border border-[var(--color-border)] min-h-[400px] shadow-sm">
                    <div id="compass-content-default"><h4 class="font-bold text-lg mb-2">Navigate Your Inner State</h4><p class="text-[var(--color-text-secondary)]">Click on any of the four quadrants to understand its characteristics, the underlying neurobiology, and how it connects to your daily experiences.</p></div>
                    <div id="compass-content-1" class="hidden content-fade-in"><h4 class="font-bold text-lg mb-2 text-[var(--color-primary)]">High Spikes / Low Sensitivity</h4><p class="text-[var(--color-text-secondary)]"><b>High Baseline, Low Sensitivity.</b> This state is characterized by a need for high-intensity stimuli to feel pleasure. While motivation might be high, satisfaction is often fleeting. It's a state of habituation where simple pleasures lose their appeal, pushing you to seek ever-stronger "hits."</p></div>
                    <div id="compass-content-2" class="hidden content-fade-in"><h4 class="font-bold text-lg mb-2 text-[var(--color-primary)]">Optimal Flow / Contentment</h4><p class="text-[var(--color-text-secondary)]"><b>High Baseline, High Sensitivity.</b> The ideal state. Your dopamine system is balanced, allowing you to derive pleasure and motivation from a wide range of activities, both simple and complex. You feel engaged, driven, and content without needing constant, intense stimulation.</p></div>
                    <div id="compass-content-3" class="hidden content-fade-in"><h4 class="font-bold text-lg mb-2 text-[var(--color-primary)]">Compulsive Seeking / Burnout</h4><p class="text-[var(--color-text-secondary)]"><b>Low Baseline, Low Sensitivity.</b> This is the "addicted brain" state, caught in the crash after too many spikes. You feel a compulsive need to seek rewards but get very little pleasure from them. It's a state of high craving and low satisfaction, leading to burnout.</p></div>
                    <div id="compass-content-4" class="hidden content-fade-in"><h4 class="font-bold text-lg mb-2 text-[var(--color-primary)]">Low Drive / Anhedonia</h4><p class="text-[var(--color-text-secondary)]"><b>Low Baseline, High Sensitivity.</b> In this depleted state, your motivation is low, and you may struggle to find pleasure in activities you once enjoyed (anhedonia). Your system is highly sensitive, but the overall baseline is too low to initiate action, leading to apathy and lethargy.</p></div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-[var(--color-surface)] border-t border-[var(--color-border)] mt-20">
        <div class="container mx-auto px-6 py-8 text-center text-[var(--color-text-secondary)]">
            <p class="text-sm">&copy; 2025 Project Dukkha. An interactive exploration of modern well-being.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            // --- Navigation Highlighting ---
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-link');

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href').substring(1) === entry.target.id) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, { rootMargin: "-50% 0px -50% 0px" });

            sections.forEach(section => observer.observe(section));

            // --- Interactive Diagram Logic ---
            function setupInteractiveDiagram(containerId, contentDisplayId, defaultContentId) {
                const nodes = document.querySelectorAll(`#${containerId} [data-content]`);
                const contentDisplay = document.getElementById(contentDisplayId);
                const defaultContent = document.getElementById(defaultContentId);
                let activeNode = null;

                nodes.forEach(node => {
                    node.addEventListener('click', () => {
                        const contentId = node.dataset.content;
                        
                        // Hide all content panels
                        contentDisplay.querySelectorAll('[id^="' + contentId.split('-')[0] + '-content-"]').forEach(el => {
                           if(el.id !== defaultContentId) el.classList.add('hidden');
                        });

                        // Deactivate previous node
                        if(activeNode) {
                            activeNode.style.borderColor = 'var(--color-border)';
                            if(activeNode.classList.contains('bg-[var(--color-accent)]')) {
                                activeNode.style.backgroundColor = 'var(--color-surface)';
                                activeNode.style.color = 'var(--color-text-primary)';
                            }
                            if(activeNode.classList.contains('optimal')){
                                activeNode.style.backgroundColor = 'var(--color-accent)';
                                activeNode.style.color = 'var(--color-text-primary)';
                            }
                        }

                        // Show selected content
                        const targetContent = document.getElementById(contentId);
                        if (targetContent) {
                            defaultContent.classList.add('hidden');
                            targetContent.classList.remove('hidden');
                            if(node.classList.contains('bg-[var(--color-surface)]')) {
                                node.style.borderColor = 'var(--color-primary)';
                                node.style.backgroundColor = 'var(--color-background)';
                            }
                             if(node.classList.contains('bg-[var(--color-accent)]')) {
                                node.style.borderColor = 'var(--color-primary)';
                                node.style.backgroundColor = 'var(--color-accent)';
                                node.style.color = 'var(--color-text-primary)';
                            }
                            if(node.classList.contains('optimal')){
                                node.style.borderColor = 'var(--color-primary)';
                                node.style.backgroundColor = 'var(--color-accent)';
                                node.style.color = 'var(--color-text-primary)';
                            }
                            activeNode = node;
                        }
                    });
                });
            }

            setupInteractiveDiagram('loop', 'loop-content-display', 'loop-content-default');
            setupInteractiveDiagram('spiral', 'spiral-content-display', 'spiral-content-default');
            setupInteractiveDiagram('compass', 'compass-content-display', 'compass-content-default');


            // --- Dopamine Chart ---
            const ctx = document.getElementById('dopamineChart').getContext('2d');
            const gradient = ctx.createLinearGradient(0, 0, 0, 400);
            gradient.addColorStop(0, 'rgba(193, 178, 148, 0.4)');
            gradient.addColorStop(1, 'rgba(193, 178, 148, 0)');
            
            const dopamineChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Stimulus', 'Peak', 'Crash', 'Trough', 'Recovery 1', 'Recovery 2', 'Recovery 3', 'Baseline Restored'],
                    datasets: [{
                        label: 'Dopamine Level',
                        data: [0, 100, -20, -50, -30, -15, -5, 0],
                        borderColor: 'var(--color-primary)',
                        backgroundColor: gradient,
                        borderWidth: 3,
                        tension: 0.4,
                        fill: true,
                        pointRadius: 4,
                        pointHoverRadius: 6,
                        pointBackgroundColor: 'var(--color-primary)',
                        pointBorderColor: 'var(--color-surface)',
                        pointBorderWidth: 2,
                    }, {
                        label: 'Baseline',
                        data: [0, 0, 0, 0, 0, 0, 0, 0],
                        borderColor: 'var(--color-secondary)',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        pointRadius: 0,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: 'Dopamine Level (Relative)',
                                color: 'var(--color-text-secondary)',
                                font: { weight: '600' }
                            },
                            ticks: {
                                color: 'var(--color-text-secondary)',
                                callback: function(value) {
                                    if (value === 100) return 'Peak Spike';
                                    if (value === 0) return 'Baseline';
                                    if (value === -50) return 'Trough';
                                    return null;
                                }
                            },
                            grid: { color: 'var(--color-border)' }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Time',
                                color: 'var(--color-text-secondary)',
                                font: { weight: '600' }
                            },
                            ticks: { color: 'var(--color-text-secondary)' },
                            grid: { color: 'var(--color-border)' }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            enabled: true,
                            mode: 'index',
                            intersect: false,
                            backgroundColor: 'var(--color-surface)',
                            titleColor: 'var(--color-primary)',
                            bodyColor: 'var(--color-text-secondary)',
                            borderColor: 'var(--color-border)',
                            borderWidth: 1,
                            cornerRadius: 8,
                            padding: 12,
                            callbacks: {
                                title: function(tooltipItems) {
                                    return 'Phase: ' + tooltipItems[0].label;
                                },
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label === 'Dopamine Level') {
                                        if (context.parsed.y > 0) return ` Level: +${context.parsed.y}%`;
                                        return ` Level: ${context.parsed.y}%`;
                                    }
                                    return null;
                                }
                            }
                        }
                    },
                    interaction: {
                        mode: 'nearest',
                        axis: 'x',
                        intersect: false
                    }
                }
            });
        });
    </script>
</body>
</html>
